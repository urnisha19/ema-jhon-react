{"ast":null,"code":"var getUser=function getUser(){var existingUser=sessionStorage.getItem('userId');if(existingUser){return existingUser;}else{var newUser='user-'+new Date().getTime();sessionStorage.setItem('userId',newUser);return newUser;}};var getDataKey=function getDataKey(){var userId=getUser();return\"emaJohn/carts/\".concat(userId);};// push to local storage: a temporary place for database\nvar getDatabaseCart=function getDatabaseCart(){var dataKey=getDataKey();var data=localStorage.getItem(dataKey)||\"{}\";return JSON.parse(data);};var addToDatabaseCart=function addToDatabaseCart(key,count){var currentCart=getDatabaseCart();currentCart[key]=count;localStorage.setItem(getDataKey(),JSON.stringify(currentCart));};var removeFromDatabaseCart=function removeFromDatabaseCart(key){var currentCart=getDatabaseCart();delete currentCart[key];localStorage.setItem(getDataKey(),JSON.stringify(currentCart));};var processOrder=function processOrder(cart){localStorage.removeItem(getDataKey());};export{addToDatabaseCart,getDatabaseCart,removeFromDatabaseCart,processOrder};// polyfill to support older browser\nvar localStorage=window.localStorage||function(){var store={};return{getItem:function getItem(key){return store[key];},setItem:function setItem(key,value){store[key]=value.toString();},clear:function clear(){store={};}};}();var sessionStorage=window.sessionStorage||function(){var store={};return{getItem:function getItem(key){return store[key];},setItem:function setItem(key,value){store[key]=value.toString();},clear:function clear(){store={};}};}();// end of poly fill","map":{"version":3,"sources":["E:/Web Development/Milestone 8/ema-jhon-simple-final-router/src/utilities/databaseManager.js"],"names":["getUser","existingUser","sessionStorage","getItem","newUser","Date","getTime","setItem","getDataKey","userId","getDatabaseCart","dataKey","data","localStorage","JSON","parse","addToDatabaseCart","key","count","currentCart","stringify","removeFromDatabaseCart","processOrder","cart","removeItem","window","store","value","toString","clear"],"mappings":"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","sourcesContent":["const getUser = () => {\n  const existingUser = sessionStorage.getItem('userId');\n  if (existingUser) {\n    return existingUser;\n  } else {\n    const newUser = 'user-' + new Date().getTime();\n    sessionStorage.setItem('userId', newUser)\n    return newUser;\n  }\n}\n\n\nconst getDataKey = () => {\n  const userId = getUser();\n  return `emaJohn/carts/${userId}`\n}\n\n// push to local storage: a temporary place for database\nconst getDatabaseCart = () => {\n  const dataKey = getDataKey();\n  const data = localStorage.getItem(dataKey) || \"{}\";\n  return JSON.parse(data);\n}\n\nconst addToDatabaseCart = (key, count) => {\n  const currentCart = getDatabaseCart();\n  currentCart[key] = count;\n  localStorage.setItem(getDataKey(), JSON.stringify(currentCart));\n}\n\nconst removeFromDatabaseCart = key => {\n  const currentCart = getDatabaseCart();\n  delete currentCart[key];\n  localStorage.setItem(getDataKey(), JSON.stringify(currentCart));\n}\n\nconst processOrder = (cart) => {\n  localStorage.removeItem(getDataKey());\n}\n\n\nexport { addToDatabaseCart, getDatabaseCart, removeFromDatabaseCart, processOrder };\n\n\n// polyfill to support older browser\nconst localStorage = window.localStorage || (() => {\n  let store = {}\n  return {\n    getItem(key) {\n      return store[key]\n    },\n    setItem(key, value) {\n      store[key] = value.toString()\n    },\n    clear() {\n      store = {}\n    }\n  };\n})()\n\nconst sessionStorage = window.sessionStorage || (() => {\n  let store = {}\n  return {\n    getItem(key) {\n      return store[key]\n    },\n    setItem(key, value) {\n      store[key] = value.toString()\n    },\n    clear() {\n      store = {}\n    }\n  };\n})()\n// end of poly fill"]},"metadata":{},"sourceType":"module"}