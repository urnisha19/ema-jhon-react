{"ast":null,"code":"import _toConsumableArray from\"E:/Web Development/Milestone 8/ema-jhon-simple-final-router/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"E:/Web Development/Milestone 8/ema-jhon-simple-final-router/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import fakeData from'../../fakeData';import{addToDatabaseCart,getDatabaseCart}from'../../utilities/databaseManager';import Cart from'../Cart/Cart';import Product from'../Product/Product';import'./Shop.css';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Shop=function Shop(){var first10=fakeData.slice(0,10);// eslint-disable-next-line\nvar _useState=useState(first10),_useState2=_slicedToArray(_useState,2),products=_useState2[0],setProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),cart=_useState4[0],setCart=_useState4[1];useEffect(function(){var savedCart=getDatabaseCart();var productKeys=Object.keys(savedCart);var previousCart=productKeys.map(function(existingKey){var product=fakeData.find(function(pd){return pd.key===existingKey;});product.quantity=savedCart[existingKey];return product;});setCart(previousCart);},[]);var handleAddProduct=function handleAddProduct(product){var toBeAdded=product.key;var sameProduct=cart.find(function(pd){return pd.key===toBeAdded;});var count=1;var newCart;if(sameProduct){count=sameProduct.quantity+1;sameProduct.quantity=count;var others=cart.filter(function(pd){return pd.key!==toBeAdded;});newCart=[].concat(_toConsumableArray(others),[sameProduct]);}else{product.quantity=1;newCart=[].concat(_toConsumableArray(cart),[product]);}setCart(newCart);addToDatabaseCart(product.key,count);};return/*#__PURE__*/_jsxs(\"div\",{className:\"twin-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-container\",children:products.map(function(pd){return/*#__PURE__*/_jsx(Product,{showAddToCart:true,handleAddProduct:handleAddProduct,product:pd,children:\" \"},pd.key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,children:/*#__PURE__*/_jsx(Link,{to:\"/review\",children:/*#__PURE__*/_jsx(\"button\",{className:\"main-button\",children:\"Review Order\"})})})})]});};export default Shop;","map":{"version":3,"sources":["E:/Web Development/Milestone 8/ema-jhon-simple-final-router/src/components/Shop/Shop.js"],"names":["React","useEffect","useState","fakeData","addToDatabaseCart","getDatabaseCart","Cart","Product","Link","Shop","first10","slice","products","setProducts","cart","setCart","savedCart","productKeys","Object","keys","previousCart","map","existingKey","product","find","pd","key","quantity","handleAddProduct","toBeAdded","sameProduct","count","newCart","others","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport fakeData from '../../fakeData';\r\nimport { addToDatabaseCart, getDatabaseCart } from '../../utilities/databaseManager';\r\nimport Cart from '../Cart/Cart';\r\nimport Product from '../Product/Product';\r\nimport './Shop.css';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Shop = () => {\r\n    const first10 = fakeData.slice(0, 10);\r\n    // eslint-disable-next-line\r\n    const [products, setProducts] = useState(first10);\r\n    const [cart, setCart] = useState([]);\r\n    useEffect(() => {\r\n        const savedCart = getDatabaseCart();\r\n        const productKeys = Object.keys(savedCart);\r\n        const previousCart = productKeys.map(existingKey => {\r\n            const product = fakeData.find(pd => pd.key === existingKey);\r\n            product.quantity = savedCart[existingKey];\r\n            return product;\r\n        })\r\n        setCart(previousCart);\r\n    }, []);\r\n\r\n    const handleAddProduct = (product) => {\r\n        const toBeAdded = product.key;\r\n        const sameProduct = cart.find(pd => pd.key === toBeAdded);\r\n        let count = 1;\r\n        let newCart;\r\n        if (sameProduct) {\r\n            count = sameProduct.quantity + 1;\r\n            sameProduct.quantity = count;\r\n            const others = cart.filter(pd => pd.key !== toBeAdded);\r\n            newCart = [...others, sameProduct];\r\n        }\r\n        else {\r\n            product.quantity = 1;\r\n            newCart = [...cart, product];\r\n        }\r\n        setCart(newCart);\r\n        addToDatabaseCart(product.key, count);\r\n    }\r\n\r\n    return (\r\n        <div className=\"twin-container\">\r\n            <div className=\"product-container\">\r\n                {\r\n                    products.map(pd => <Product key={pd.key} showAddToCart={true} handleAddProduct={handleAddProduct} product={pd} > </Product>)\r\n                }\r\n            </div>\r\n            <div className=\"cart-container\">\r\n                <Cart cart={cart}>\r\n                    <Link to=\"/review\">\r\n                        <button className=\"main-button\">Review Order</button>\r\n                    </Link>\r\n                </Cart>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nexport default Shop;"]},"metadata":{},"sourceType":"module"}