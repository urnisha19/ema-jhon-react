{"ast":null,"code":"import _slicedToArray from\"E:/Web Development/Milestone 8/ema-jhon-simple-final-router/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{getDatabaseCart,processOrder,removeFromDatabaseCart}from'../../utilities/databaseManager';import fakeData from'../../fakeData';import ReviewItem from'../ReviewItem/ReviewItem';import Cart from'../Cart/Cart';import{Link}from'react-router-dom';import happyImage from'../../images/giphy.gif';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Review=function Review(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),cart=_useState2[0],setCart=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),orderPlaced=_useState4[0],setOrderPlaced=_useState4[1];var handlePlaceOrder=function handlePlaceOrder(){setCart([]);setOrderPlaced(true);processOrder();};var removeProduct=function removeProduct(productKey){var newCart=cart.filter(function(pd){return pd.key!==productKey;});setCart(newCart);removeFromDatabaseCart(productKey);};useEffect(function(){//cart\nvar savedCart=getDatabaseCart();var productKeys=Object.keys(savedCart);var cartProducts=productKeys.map(function(key){var product=fakeData.find(function(pd){return pd.key===key;});product.quantity=savedCart[key];return product;});setCart(cartProducts);},[]);var thankyou;if(orderPlaced){thankyou=/*#__PURE__*/_jsx(\"img\",{src:happyImage,alt:\"\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"twin-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"product-container\",children:[cart.map(function(pd){return/*#__PURE__*/_jsx(ReviewItem,{removeProduct:removeProduct,product:pd},pd.key);}),thankyou]}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-container\",children:/*#__PURE__*/_jsx(Cart,{cart:cart,children:/*#__PURE__*/_jsx(Link,{to:\"/review\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handlePlaceOrder,className:\"main-button\",children:\"Place Order\"})})})})]});};export default Review;","map":{"version":3,"sources":["E:/Web Development/Milestone 8/ema-jhon-simple-final-router/src/components/Review/Review.js"],"names":["React","useEffect","useState","getDatabaseCart","processOrder","removeFromDatabaseCart","fakeData","ReviewItem","Cart","Link","happyImage","Review","cart","setCart","orderPlaced","setOrderPlaced","handlePlaceOrder","removeProduct","productKey","newCart","filter","pd","key","savedCart","productKeys","Object","keys","cartProducts","map","product","find","quantity","thankyou"],"mappings":"kLAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,eAAT,CAA0BC,YAA1B,CAAwCC,sBAAxC,KAAsE,iCAAtE,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,IAAP,KAAiB,cAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,UAAP,KAAuB,wBAAvB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,eACOT,QAAQ,CAAC,EAAD,CADf,wCACVU,IADU,eACJC,OADI,8BAEqBX,QAAQ,CAAC,KAAD,CAF7B,yCAEVY,WAFU,eAEGC,cAFH,eAGjB,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC3BH,OAAO,CAAC,EAAD,CAAP,CACAE,cAAc,CAAC,IAAD,CAAd,CACAX,YAAY,GACf,CAJD,CAKA,GAAMa,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,UAAD,CAAgB,CAClC,GAAMC,CAAAA,OAAO,CAAGP,IAAI,CAACQ,MAAL,CAAY,SAAAC,EAAE,QAAIA,CAAAA,EAAE,CAACC,GAAH,GAAWJ,UAAf,EAAd,CAAhB,CACAL,OAAO,CAACM,OAAD,CAAP,CACAd,sBAAsB,CAACa,UAAD,CAAtB,CACH,CAJD,CAKAjB,SAAS,CAAC,UAAM,CACZ;AACA,GAAMsB,CAAAA,SAAS,CAAGpB,eAAe,EAAjC,CACA,GAAMqB,CAAAA,WAAW,CAAGC,MAAM,CAACC,IAAP,CAAYH,SAAZ,CAApB,CACA,GAAMI,CAAAA,YAAY,CAAGH,WAAW,CAACI,GAAZ,CAAgB,SAAAN,GAAG,CAAI,CACxC,GAAMO,CAAAA,OAAO,CAAGvB,QAAQ,CAACwB,IAAT,CAAc,SAAAT,EAAE,QAAIA,CAAAA,EAAE,CAACC,GAAH,GAAWA,GAAf,EAAhB,CAAhB,CACAO,OAAO,CAACE,QAAR,CAAmBR,SAAS,CAACD,GAAD,CAA5B,CACA,MAAOO,CAAAA,OAAP,CACH,CAJoB,CAArB,CAKAhB,OAAO,CAACc,YAAD,CAAP,CACH,CAVQ,CAUN,EAVM,CAAT,CAYA,GAAIK,CAAAA,QAAJ,CACA,GAAIlB,WAAJ,CAAiB,CACbkB,QAAQ,cAAG,YAAK,GAAG,CAAEtB,UAAV,CAAsB,GAAG,CAAC,EAA1B,EAAX,CACH,CAED,mBACI,aAAK,SAAS,CAAC,gBAAf,wBACI,aAAK,SAAS,CAAC,mBAAf,WAEQE,IAAI,CAACgB,GAAL,CAAS,SAAAP,EAAE,qBAAI,KAAC,UAAD,EAEX,aAAa,CAAEJ,aAFJ,CAGX,OAAO,CAAEI,EAHE,EACNA,EAAE,CAACC,GADG,CAAJ,EAAX,CAFR,CAQQU,QARR,GADJ,cAYI,YAAK,SAAS,CAAC,gBAAf,uBACI,KAAC,IAAD,EAAM,IAAI,CAAEpB,IAAZ,uBACI,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,uBACI,eACI,OAAO,CAAEI,gBADb,CAEI,SAAS,CAAC,aAFd,yBADJ,EADJ,EADJ,EAZJ,GADJ,CAwBH,CAtDD,CAwDA,cAAeL,CAAAA,MAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { getDatabaseCart, processOrder, removeFromDatabaseCart } from '../../utilities/databaseManager';\r\nimport fakeData from '../../fakeData';\r\nimport ReviewItem from '../ReviewItem/ReviewItem';\r\nimport Cart from '../Cart/Cart';\r\nimport { Link } from 'react-router-dom';\r\nimport happyImage from '../../images/giphy.gif';\r\n\r\nconst Review = () => {\r\n    const [cart, setCart] = useState([]);\r\n    const [orderPlaced, setOrderPlaced] = useState(false);\r\n    const handlePlaceOrder = () => {\r\n        setCart([]);\r\n        setOrderPlaced(true);\r\n        processOrder();\r\n    }\r\n    const removeProduct = (productKey) => {\r\n        const newCart = cart.filter(pd => pd.key !== productKey);\r\n        setCart(newCart);\r\n        removeFromDatabaseCart(productKey);\r\n    }\r\n    useEffect(() => {\r\n        //cart\r\n        const savedCart = getDatabaseCart();\r\n        const productKeys = Object.keys(savedCart);\r\n        const cartProducts = productKeys.map(key => {\r\n            const product = fakeData.find(pd => pd.key === key);\r\n            product.quantity = savedCart[key];\r\n            return product;\r\n        });\r\n        setCart(cartProducts);\r\n    }, []);\r\n\r\n    let thankyou;\r\n    if (orderPlaced) {\r\n        thankyou = <img src={happyImage} alt=\"\" />\r\n    }\r\n\r\n    return (\r\n        <div className=\"twin-container\">\r\n            <div className=\"product-container\">\r\n                {\r\n                    cart.map(pd => <ReviewItem\r\n                        key={pd.key}\r\n                        removeProduct={removeProduct}\r\n                        product={pd}></ReviewItem>)\r\n                }\r\n                {\r\n                    thankyou\r\n                }\r\n            </div>\r\n            <div className=\"cart-container\">\r\n                <Cart cart={cart}>\r\n                    <Link to=\"/review\">\r\n                        <button\r\n                            onClick={handlePlaceOrder}\r\n                            className=\"main-button\">Place Order</button>\r\n                    </Link>\r\n                </Cart>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Review;"]},"metadata":{},"sourceType":"module"}